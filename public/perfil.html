<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi Perfil - Artesanos.com</title>
  <link rel="stylesheet" href="/perfil.css" />
  <script src="/socket.io/socket.io.js" defer></script>
  <script src="perfil.js" defer></script>
</head>
<body>
  <header class="main-header">
    <div class="logo">Artesanos.com</div>
    <nav class="auth-links">
      <button onclick="window.location.href='index.html'">⬅ Volver al inicio</button>
    </nav>
  </header>

  <!-- PANEL LATERAL DE NOTIFICACIONES -->
  <aside class="notificacion-lateral" id="notificationPanel">
    <h3>Notificaciones</h3>
    <div id="notificacionesLista">No hay solicitudes</div>
  </aside>

  <main class="perfil-container">
    <section class="perfil-header">
      <img id="avatar-preview" src="/uploads/default.jpg" alt="Foto de perfil" class="perfil-avatar" />
      <h2 id="nombre-usuario">Mi Perfil</h2>
    </section>

    <section class="perfil-info-columns">
      <div class="col-izquierda">
        <form id="perfil-form" enctype="multipart/form-data">
          <div class="form-group"><label>Nombre completo:</label><input type="text" name="nombre" required></div>
          <div class="form-group"><label>Email:</label><input type="email" name="email" required></div>
          <div class="form-group"><label>Intereses:</label><input type="text" name="intereses"></div>
          <div class="form-group"><label>Biografía:</label><textarea name="antecedentes"></textarea></div>
          <div class="form-group"><label>Imagen de perfil:</label><input type="file" name="imagen" id="imagen"></div>
          <button type="submit">Guardar cambios</button>
        </form>
        <div id="perfil-message"></div>
      </div>

      <div class="col-derecha">
        <form id="pass-form">
          <h3>Cambiar contraseña</h3>
          <input type="password" name="nuevaPass" placeholder="Nueva contraseña" required>
          <button type="submit">Actualizar contraseña</button>
        </form>

        <section class="friends">
          <h3>Agregar amigos</h3>
          <div id="usuarios-lista"></div>
        </section>

        <section class="friends-accepted">
          <h3>Amigos</h3>
          <ul id="lista-amigos"></ul>
        </section>
      </div>
    </section>

    <section class="image-upload">
      <h3>Crear publicación</h3>
      <form id="publicacion-form" enctype="multipart/form-data">
        <input type="text" name="caption" placeholder="¿Qué estás pensando?" required>
        <input type="file" name="image" accept="image/*" required>
        <input type="text" name="albumTitle" placeholder="Título del álbum (opcional)">
        <button type="submit">Publicar</button>
      </form>
      <div id="publicacion-mensaje"></div>
    </section>

    <section class="publicaciones" id="contenedor-publicaciones"></section>
  </main>
</body>
</html>
